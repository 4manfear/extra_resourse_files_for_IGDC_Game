from maya.app.flux.imports import *
import maya.app.flux.core as fx
import maya.app.TTF.debug as tDebug

if not 'ttfExtractWindow' in globals():
    ttfExtractWindow = None

class TTFExtractWindow(qt.QDialog):
    def __init__(self, parent=None):
        qt.QDialog.__init__(self, parent)
        self.setWindowTitle(fx.res('kTTF_Extract'))
        fx.setVLayout(self, 2,2,2,2,2)

        def addBtn(name, action):
            btn = qt.QPushButton(name)
            btn.clicked.connect(action)
            self.layout().addWidget(btn)

        addBtn('Export Menu Items Stats', tDebug.getMenuInfo)
        addBtn('Export All Menu Items', tDebug.exportMenus)
        addBtn('Export All runTimeCommands', tDebug.exportRTC)
        addBtn('Export All TTF Items', tDebug.exportTTF)

    def closeEvent(self, e):
        global ttfExtractWindow
        ttfExtractWindow = None
        self.setParent(None)
        self.deleteLater()

def openLauncher():
    global ttfExtractWindow
    if ttfExtractWindow is None:
        ttfExtractWindow = TTFExtractWindow(parent=fx.mayaWindow())
        ttfExtractWindow.show()
    ttfExtractWindow.window().raise_()
    ttfExtractWindow.raise_()
    ttfExtractWindow.activateWindow()

def launcherDestroyed():
    global ttfExtractWindow
    if ttfExtractWindow:
        ttfExtractWindow.close()
    ttfExtractWindow = None# ===========================================================================
# Copyright 2022 Autodesk, Inc. All rights reserved.
#
# Use of this software is subject to the terms of the Autodesk license
# agreement provided at the time of installation or download, or which
# otherwise accompanies this software in either electronic or hard copy form.
# ===========================================================================
