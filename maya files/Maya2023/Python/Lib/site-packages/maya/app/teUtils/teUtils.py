import maya.cmds as cmds

def getCommonParentForSelectedTransforms():
    '''
    Get the common parent to all the selected transforms.
    Loop through the parents of one of the provided
    transforms to find a parent to all.
    '''
    # Grab the selected transforms and build a set
    # to select from
    selectedXforms = cmds.ls(sl=True,type='transform')
    selectedXformsSet = set(selectedXforms)

    # Grab the first transform
    tmpNode = selectedXforms[0]
    stopLooking = False
    commonParent = []

    while stopLooking is False:
        # For each node, is the set of its children
        # a superset of the original list we were
        # given?
        tmpNodeKids = set(cmds.listRelatives(tmpNode, allDescendents=True))
        if (tmpNodeKids.issuperset(selectedXformsSet)):
            commonParent = tmpNode
            stopLooking = True
        else:
            tmpNode = cmds.listRelatives(tmpNode, allParents=True)
            if tmpNode is None:
                stopLooking = True

    return commonParent
# ===========================================================================
# Copyright 2022 Autodesk, Inc. All rights reserved.
#
# Use of this software is subject to the terms of the Autodesk license
# agreement provided at the time of installation or download, or which
# otherwise accompanies this software in either electronic or hard copy form.
# ===========================================================================
