import maya
maya.utils.loadStringResourcesForModule(__name__)

import maya.cmds as cmds
import maya.internal.nodes.weightgeometryfilter.ae_template as wgfae
from maya.internal.common.ae.template import Layout

class AETemplate(wgfae.AETemplate):
    def buildUI(self, nodeName):
        with Layout(self, maya.stringTable['y_maya_internal_nodes_texturedeformer_ae_template.kTextureDeformerAttributes'  ], False):
            self.addControl("pointSpace")
            self.addControl("direction", callback=AETemplate._switchTextureDeformerVectorModeUI)
            self.addControls([
            "vectorSpace",
            "texture",
            "strength",
            "offset",
            "vectorStrength",
            "vectorOffset"
            ])
        self.suppress("startPosition")
        self.suppress("extendedEnd")
        self.suppress("handleVisibility")
        self.suppress("handleMatrix")

        super(AETemplate, self).buildUI(nodeName)

    @staticmethod
    def _switchTextureDeformerVectorModeUI(nodeName):
        plug = "%s.%s"%(nodeName, "direction")
        value = cmds.getAttr(plug)
        cmds.editorTemplate(dimControl=[nodeName, "strength", value == 2])
        cmds.editorTemplate(dimControl=[nodeName, "offset", value == 2])
        cmds.editorTemplate(dimControl=[nodeName, "vectorStrength", value != 2])
        cmds.editorTemplate(dimControl=[nodeName, "vectorOffset", value != 2])
        cmds.editorTemplate(dimControl=[nodeName, "vectorSpace", value != 2])


# ===========================================================================
# Copyright 2022 Autodesk, Inc. All rights reserved.
#
# Use of this software is subject to the terms of the Autodesk license
# agreement provided at the time of installation or download, or which
# otherwise accompanies this software in either electronic or hard copy form.
# ===========================================================================
