import maya
maya.utils.loadStringResourcesForModule(__name__)

import maya.cmds
import maya.internal.common.ae.template as aetemplate
import maya.internal.common.ae.ramp as aeramp
from maya.common.ui import LayoutManager

class AETemplate(aetemplate.Template):
    def buildUI(self, nodeName):
        with aetemplate.Layout(self, maya.stringTable['y_maya_internal_nodes_subsetfalloff_ae_template.kLabelProximityFalloffAttr' ]):
            self.addControl('useFalloffTags', callback=self.__useFalloffTagsCheck)
            self.addControl('falloffTags')
            self.addControl('withinBoundary')
            self.addControl('useOriginalGeometry')
            self.addControl('mode', callback=self.__modeCheck)
            self.addControls(['start', 'end', 'scale'])
            self.defineCustom(aeramp.RampControl(), ['ramp'])

            self.suppress('ramp')
            self.suppress('outputWeightFunction')

        self.callTemplate('dependNode')

    @staticmethod
    def __useFalloffTagsCheck(nodeName):
        useFalloffTags = maya.cmds.getAttr('{}.useFalloffTags'.format(nodeName))
        maya.cmds.editorTemplate(dimControl=[nodeName, 'falloffTags', not useFalloffTags])

    @staticmethod
    def __modeCheck(nodeName):
        mode = maya.cmds.getAttr('{}.mode'.format(nodeName))
        maya.cmds.editorTemplate(dimControl=[nodeName, 'connectionLevel', mode != 0])
# ===========================================================================
# Copyright 2022 Autodesk, Inc. All rights reserved.
#
# Use of this software is subject to the terms of the Autodesk license
# agreement provided at the time of installation or download, or which
# otherwise accompanies this software in either electronic or hard copy form.
# ===========================================================================
