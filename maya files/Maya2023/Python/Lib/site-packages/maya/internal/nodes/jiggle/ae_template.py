import maya
maya.utils.loadStringResourcesForModule(__name__)

import maya.internal.common.ae.template as aetemplate
import maya.internal.nodes.weightgeometryfilter.ae_template as ae
import maya.cmds

class AETemplate(ae.AETemplate):
    def buildUI(self, nodeName):
        with aetemplate.Layout(self, maya.stringTable[ 'y_maya_internal_nodes_jiggle_ae_template.kJiggleAttributes'  ], collapse=False):
            self.addControl('enable', callback=self.__checkMotionMultiplier)
            self.addControls([
                'stiffness',
                'damping',
                'jiggleWeight',
                'forceAlongNormal',
                'forceOnTangent',
                'motionMultiplier',
                'directionBias',
                'ignoreTransform',
            ])
        with aetemplate.Layout(self, maya.stringTable[ 'y_maya_internal_nodes_jiggle_ae_template.kDiskCacheAttributes'  ], collapse=False):
            self.addControls(['diskCache'])

        super(AETemplate, self).buildUI(nodeName)

    @staticmethod
    def __checkMotionMultiplier(nodeName):
        enableOnlyWhenResting = (maya.cmds.getAttr('{}.enable'.format(nodeName)) == 2)
        maya.cmds.editorTemplate(dimControl=[nodeName, 'motionMultiplier', not enableOnlyWhenResting])
# ===========================================================================
# Copyright 2022 Autodesk, Inc. All rights reserved.
#
# Use of this software is subject to the terms of the Autodesk license
# agreement provided at the time of installation or download, or which
# otherwise accompanies this software in either electronic or hard copy form.
# ===========================================================================
