'''
Maya Instruction on how to create a control for a string attribute

Read the Readme.md for further information
'''

import maya.cmds as cmds
from . import template

def replace(controlName, plugName, attrName, changedCommand ):
    # special control for mental ray node
    if template.isClassified(template.plugNode(plugName), "rendernode/mentalray"):
        #TODO: put mental ray override in mental ray plugin, wit does not belong here
        return mel.eval("AEmentalrayReplaceString(%s,%s,%s)"% (controlName, plugName, changedCommand))

    if cmds.textFieldGrp(controlName, exists=True):
        cmds.textFieldGrp(controlName, e=True, label=attrName)

    cmds.connectControl(controlName, plugName, index=2)
    template.attachCallback(plugName,controlName, changedCommand)


def create( plugName, attrName, changedCommand ):
    createdControl = cmds.textFieldGrp(l=attrName)
    cmds.connectControl(createdControl, plugName, index=2)
    template.attachCallback(plugName,createdControl, changedCommand)

    return createdControl# ===========================================================================
# Copyright 2022 Autodesk, Inc. All rights reserved.
#
# Use of this software is subject to the terms of the Autodesk license
# agreement provided at the time of installation or download, or which
# otherwise accompanies this software in either electronic or hard copy form.
# ===========================================================================
