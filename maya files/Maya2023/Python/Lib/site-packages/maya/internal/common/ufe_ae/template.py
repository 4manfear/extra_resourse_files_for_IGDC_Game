import maya
maya.utils.loadStringResourcesForModule(__name__)

import ufe
import maya.cmds as cmds

class Layout(object):
    def __init__(self, template, name, collapse=False):
        self.template = template
        self.collapse = collapse
        self.name = name
    def __enter__(self):
        cmds.editorTemplate(beginLayout=self.name, collapse=self.collapse)
        return self.template

    def __exit__(self, mytype, value, tb):
        cmds.editorTemplate(endLayout=True)

class Template(object):
    def __init__(self, ufeSceneItem):
        self.item = ufeSceneItem
        self.nodeName = ufeSceneItem.nodeName()

        cmds.editorTemplate(beginScrollLayout=True)
        self.buildUI(self.item)
        cmds.editorTemplate(addExtraControls=True)
        cmds.editorTemplate(endScrollLayout=True)

    @staticmethod
    def suppress(control):
        cmds.editorTemplate(suppress=control)

    @staticmethod
    def addControl(control):
        cmds.editorTemplate(addControl=[control])

    def addControls(self, controls):
        for c in controls:
            self.addControl(c)

    def buildUI(self, nodeName):
        raise NotImplementedError(maya.stringTable['y_maya_internal_common_ufe_ae_template.kErrMsgBuildUINotImplemented' ])

def getUfeAttribute(rawAttrs, attrName):
    '''
    Helper function to get the UFE attribute matching the input attribute name
    from the input attributes object.
    '''
    ufeAttrs = ufe.getAttributesFromRaw(rawAttrs)
    if ufeAttrs:
        attr = ufeAttrs.attribute(attrName)
        return attr
# ===========================================================================
# Copyright 2022 Autodesk, Inc. All rights reserved.
#
# Use of this software is subject to the terms of the Autodesk license
# agreement provided at the time of installation or download, or which
# otherwise accompanies this software in either electronic or hard copy form.
# ===========================================================================
