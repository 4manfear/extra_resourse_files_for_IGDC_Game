// ===========================================================================
// Copyright 2022 Autodesk, Inc. All rights reserved.
//
// Use of this software is subject to the terms of the Autodesk license
// agreement provided at the time of installation or download, or which
// otherwise accompanies this software in either electronic or hard copy form.
// ===========================================================================
//
//
//  Creation Date:  12 July 1996
//
//  Description:
//      This file creates popup menu for the lister editor.
//

global proc listerEdMenu (string $parent)
{
	// assume parent is the name of the editor, not a Tcontrol.
	string $menuName = $parent + "Popup";
	string $controlName = $parent;
	string $panel = "";
	string $topControl;
	if(`listerEditor -exists $parent`) {
		$controlName = `listerEditor -q -control $parent`;
		$panel = `listerEditor -q -panel $parent`;
	}

	if($panel == "") {
		$topControl = $parent;
	} else {
		if(`scriptedPanel -exists $panel`) {
			string $control = `scriptedPanel -q -control $panel`;
			$topControl = ($control + "|" + $panel);
		} else {
			$topControl = $parent;
		}
	}

	popupMenu -parent $controlName -mm false 
		$menuName;
	popupMenu -e
		-postMenuCommand ("buildMultiListerPopupMenu " + $menuName + " " 
						  + $topControl + " " + $parent)
		$menuName;

	setParent -menu ..;
}

